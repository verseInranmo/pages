<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>date</title>
		<style type="text/css">
			.divs{
				width: 38px;
				height: 38px;
				text-align: center;
				line-height: 38px;
				display: inline-block;
			}
			#showDate{
				width:500px;
				height:50px;
				font-size: 30px;
				color:#000;
			}
			#showTime{
				width:1000px;
				height:60px;
			}
			#showTime img{
				width: 35px;
				height: 45px;
				float: left;
			}
		</style>
	</head>
	<body>
		<div id="showDate">
			
		</div>
		<div id="showTime">
			<img src="images/0.png" alt="" />
			<img src="images/0.png" alt="" />
			<img src="images/dot.png" alt="" />
			<img src="images/0.png" alt="" />
			<img src="images/0.png" alt="" />
			<img src="images/dot.png" alt="" />
			<img src="images/0.png" alt="" />
			<img src="images/0.png" alt="" />
		</div>
		<div style="width:280px;">
		<input type="button" id="back" value="<" /><span id="date"></span><input type="button" id="go" value=">" /><input type="button" value="今天" id="tod" style="float:right">
		</div>
		<div id="box" style="width:280px;height:0 auto;border:1px solid gray;">
			
		</div>
	</body>
		<script type="text/javascript">
			"use strict"         //严格模式

			var box=document.getElementById('box');
			var mydate=document.getElementById('date');
			var arr=new Array('一','二','三','四','五','六','日');
			var today=new Date();
			var nowYear=today.getFullYear();
			var year=nowYear;
			var nowMonth=today.getMonth();
			var month=nowMonth;
        	var dates=today.getDate();
        	
        	var tod=document.getElementById('tod');
        	tod.onclick=function(){
        		while(box.hasChildNodes()){
					box.removeChild(box.lastChild);
				}
        		month=nowMonth;
        		year=nowYear;
        		start();
        	}
        	
			
        	function start(){
        		var firstday=new Date(year,month,1);
        		var daynum=firstday.getDay()-1;
        		if(daynum<0){
        			daynum=6;
        		}
        		var div;
        		for(var i=0;i<7;i++){
					div=document.createElement('div');
				    box.appendChild(div);
				    div.className='divs';
				    div.innerHTML=arr[i];
				    //console.log(div.className);
				}
        		

		 	 	//获取当月天数的一种方法：
    //             var two;
				// if((year%4==0&&year%100!=0)||year%400==0){
    //     			two=29;
    //     		}
    //     		else{
    //     			two=28;
    //     		}
    //     		var daysum=new Array(31,two,31,30,31,30,31,31,30,31,30,31);
    //     		var num=Math.ceil((daynum+daysum[month])/7);
    //     		for(var j=0;j<num;j++){
				// 	for(var k=1;k<=7;k++){
				// 		var dat=7*j+k-daynum;
				// 		div=document.createElement('div');
				//     	box.appendChild(div);
				//     	div.className='divs';
				// 		if(dat<1||dat>daysum[month]){
				// 		    if(dat>daysum[month]){
				// 		    	dat=dat-daysum[month];
				// 		    	div.style.color="#ccc";
				// 		    }
				// 		    if(dat<1){
				// 		    	if(month>1){
				// 		    		dat += daysum[month-1];
				// 		    	}
				// 		    	else{
				// 		    		dat += 31;
				// 		    	}
				// 		    	div.style.color='#ccc';
				// 		    }
				// 		}
				//     	div.innerHTML=dat;
				// 		if(dat==dates&&month==nowMonth&&year==nowYear){
				// 			div.style.background='orange';
				// 		}
				// 	}
				// }
        		//还可以是：
        		var d=new Date(year,month+1,0);
     			var daysum=d.getDate();
					var num=Math.ceil((daynum+daysum)/7);
					for(var j=0;j<num;j++){
					for(var k=1;k<=7;k++){
						var dat=7*j+k-daynum;
						div=document.createElement('div');
				    	box.appendChild(div);
				    	div.className='divs';
						if(dat<1||dat>daysum){
						    if(dat>daysum){
						    	dat=dat-daysum;
						    	div.style.color="#ccc";
						    }
						    if(dat<1){
						    	if(month>1){
                                    var d1=new Date(year,month,0);
                                    var daysum1=d1.getDate();
						    		dat += daysum1;
						    	}
						    	else{
						    		dat += 31;
						    	}
						    	div.style.color='#ccc';
						    }
						}
				    	div.innerHTML=dat;
						if(dat==dates&&month==nowMonth&&year==nowYear){
							div.style.background='orange';
						}
					}
				}

				mydate.innerHTML=year+'年'+(month+1)+'月';
			}
        	start();
			
			var go=document.getElementById('go');
			var back=document.getElementById('back');
			
			go.onclick=fngo;
			back.onclick=fnback;
			
			function fnback(){
				while(box.hasChildNodes()){
					box.removeChild(box.lastChild);
				}
				month--;
				if(month<0){
					year--;
					month=11;
				}
				start();
			}
			function fngo(){
				while(box.hasChildNodes()){
					box.removeChild(box.lastChild);
				}
				month++;
				if(month>11){
					year++;
					month=0;
				}
				start();
			}
			
			function update(){
				var img=new Array('images/0.png','images/1.png','images/2.png','images/3.png','images/4.png','images/5.png','images/6.png','images/7.png','images/8.png','images/9.png','images/dot.png');
				var today=new Date();
				var y = today.getFullYear();
				var m = today.getMonth()+1;
				var d = today.getDate();
				var nowDate=document.getElementById('showDate');
				nowDate.innerHTML=y+'年'+m+'月'+d+"日";
				var hours=today.getHours();
				var min=today.getMinutes();
				var sec=today.getSeconds();
				var h1=Math.floor(hours/10);
				var h2=hours%10;
				var m1=Math.floor(min/10);
				var m2=min%10;
				var s1=Math.floor(sec/10);
				var s2=sec%10;
				var imgs=document.getElementById('showTime').getElementsByTagName('img');
				imgs[0].src=img[h1];
				imgs[1].src=img[h2];
				imgs[3].src=img[m1];
				imgs[4].src=img[m2];
				imgs[6].src=img[s1];
				imgs[7].src=img[s2];
			//console.log(hours);
			}
			var time=setInterval(update,100);
		</script>
</html>
